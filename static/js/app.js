(function(){"use strict";var e={7243:function(e,s,o){var t=o(3751),a=o(5615),n=o(641);function r(e,s,o,t,a,r){const i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(i)}const i=(0,a.nY)("userStore",{state:()=>({user_id:null,username:null,online_id:null,favourite_genres:[]}),actions:{setUser(e,s,o,t){this.user_id=e,this.username=s,this.online_id=o,this.favourite_genres=t,localStorage.setItem("user",JSON.stringify(this.$state))},loadUser(){const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e);s.user_id?(this.user_id=s.user_id,this.username=s.username,this.online_id=s.online_id,this.favourite_genres=s.favourite_genres):this.clearUser()}catch(s){console.error("Error parsing user data:",s),this.clearUser()}},updateUsername(e){this.username=e},updateOnlineID(e){this.online_id=e},updateFavouriteGenres(e){this.favourite_genres=e},clearUser(){localStorage.removeItem("user"),sessionStorage.removeItem("user"),this.user_id=null,this.username=null,this.online_id=null,this.favourite_genres=[]}}}),l=()=>"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?"":"http://127.0.0.1:8000",c={apiBaseUrl:l()};var d=c,u={name:"App",setup(){const e=i(),s=d.apiBaseUrl,o=async()=>{try{const o=await fetch(`${s}/user/`,{method:"GET",credentials:"include"});if(o.ok){const s=await o.json();e.setUser(s.id,s.username,s.online_id,s.favourite_genres)}else console.log("Session invalid, clearing stored user data"),e.clearUser()}catch(o){console.error("Error validating user session:",o),e.clearUser()}};return o(),{userStore:e}}},h=o(6262);const k=(0,h.A)(u,[["render",r]]);var _=k,g=o(5220),p=o(33);const b={class:"search_container"},f={class:"search_button_div"},v={class:"searchbar"},m=["placeholder"],w=["disabled"],y={key:0,class:"no_more_books"},L={key:1,class:"media_list"},C={class:"media_list_ul"},E=["src"],P=["src"],T={class:"sub_media_list"},B={key:0,class:"sub_media_list_ul"},F={key:0,class:"genre_list"},X={key:1,class:"genre_list"},M={key:1,class:"sub_media_list_ul"},S={class:"book_title"},U={key:0,class:"genre_list"},I={key:1,class:"genre_list"},O=["onClick"],q={class:"pagination_control"},$=["disabled"],N=["disabled"],A=["disabled"],R=["disabled"],W=["disabled"],D=["disabled"],G={key:2,class:"chosen_media"},x=["src"],Q={class:"chosen_media_info"},j={class:"chosen_genre_list"},V={key:0,class:"chosen_genre",style:{}},K={class:"overview"},J={key:3,class:"chosen_media"},H=["src"],Y={class:"chosen_media_info"},z={class:"chosen_media_title_div"},Z={class:"chosen_media_info_title"},ee={class:"chosen_author_div"},se={class:"authors"},oe={style:{fontWeight:"900"}},te={class:"star_rating_div"},ae=["onClick","onMouseover"],ne=["innerHTML"],re={key:0,class:"chosen_genre_list"},ie={key:0,class:"chosen_genre",style:{"background-color":"grey"}},le={key:1,class:"chosen_genre_list"},ce={class:"overview"};function de(e,s,o,a,r,i){const l=(0,n.g2)("RecommendModal");return(0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("form",{onSubmit:s[8]||(s[8]=(0,t.D$)((()=>{}),["prevent"])),class:"search"},[(0,n.Lk)("div",f,[(0,n.Lk)("button",{onClick:s[0]||(s[0]=e=>i.toggleMedia("Books")),class:(0,p.C4)([{active:"Books"===r.searchMedia},"book_button"])}," Books",2),(0,n.Lk)("button",{onClick:s[1]||(s[1]=e=>i.toggleMedia("Movies")),class:(0,p.C4)([{active:"Movies"===r.searchMedia},"movie_button"])}," Movies ",2),(0,n.Lk)("button",{onClick:s[2]||(s[2]=e=>i.toggleMedia("TV Shows")),class:(0,p.C4)([{active:"TV Shows"===r.searchMedia},"show_button"])}," TV Shows ",2)]),(0,n.Lk)("div",v,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Search "+r.searchMedia+" - Trending "+r.searchMedia,"onUpdate:modelValue":s[3]||(s[3]=e=>r.query=e),onInput:s[4]||(s[4]=e=>i.search(!0))},null,40,m),[[t.Jo,r.query]]),(0,n.Lk)("button",{onClick:s[5]||(s[5]=(...e)=>i.clearQuery&&i.clearQuery(...e)),class:"clear_button"},"×")]),(0,n.Lk)("button",{class:(0,p.C4)(["rcmnd-button",{"active-rcmnd":null!==r.chosenMedia}]),onClick:s[6]||(s[6]=e=>i.recommendBooks(r.chosenMedia)),disabled:null===r.chosenMedia}," Recommend Books ",10,w),(0,n.Lk)("button",{class:"login-btn",onClick:s[7]||(s[7]=(...e)=>i.redirectToLogin&&i.redirectToLogin(...e))},(0,p.v_)(a.userStore.user_id?a.userStore.online_id:"Login"),1)],32),(0,n.bF)(l,{isVisible:r.isModalVisible,"onUpdate:isVisible":s[9]||(s[9]=e=>r.isModalVisible=e),recommendedBooks:r.rcmndBooks,mediaType:r.searchMedia,mediaName:r.query,loggedUser:i.loggedUser.online_id,onClose:s[10]||(s[10]=e=>r.isModalVisible=!1)},null,8,["isVisible","recommendedBooks","mediaType","mediaName","loggedUser"]),0==r.mediaList.length&&0==r.isLoading&&"Books"==r.searchMedia&&null==r.chosenMedia?((0,n.uX)(),(0,n.CE)("div",y,[s[20]||(s[20]=(0,n.Lk)("p",null,"No more book results",-1)),(0,n.Lk)("button",{onClick:s[11]||(s[11]=e=>i.search(!0))},"Go Back")])):(0,n.Q3)("",!0),r.mediaList.length>0?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("ul",C,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.mediaList,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"media_list_li",key:e.id},["Movies"==this.searchMedia||"TV Shows"==this.searchMedia?((0,n.uX)(),(0,n.CE)("img",{key:0,src:"https://image.tmdb.org/t/p/original/"+e.poster_path,alt:"Movie poster",class:"list_img"},null,8,E)):(0,n.Q3)("",!0),"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.volumeInfo?.imageLinks?.thumbnail,class:"list_img"},null,8,P)):(0,n.Q3)("",!0),(0,n.Lk)("div",T,["Movies"==this.searchMedia||"TV Shows"==this.searchMedia?((0,n.uX)(),(0,n.CE)("ul",B,[(0,n.Lk)("li",null,[s[21]||(s[21]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e.title||e.name||"Title unavailable"),1)]),(0,n.Lk)("li",null,[s[22]||(s[22]=(0,n.Lk)("b",null,"Released: ",-1)),(0,n.eW)((0,p.v_)(e.release_date||e.first_air_date||"Not specified"),1)]),s[24]||(s[24]=(0,n.Lk)("li",null,[(0,n.Lk)("b",null,"Genres: ")],-1)),e.genre_ids?.length>0?((0,n.uX)(),(0,n.CE)("ul",F,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.genre_ids,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"genre",key:e,style:(0,p.Tr)({backgroundColor:i.getGenreColor(e)})},(0,p.v_)(i.getGenreName(e)),5)))),128))])):((0,n.uX)(),(0,n.CE)("ul",X,s[23]||(s[23]=[(0,n.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("ul",M,[(0,n.Lk)("li",S,[s[25]||(s[25]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e?.volumeInfo?.title||"No title available"),1)]),(0,n.Lk)("li",null,[s[26]||(s[26]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(e?.volumeInfo?.publishedDate||"Not specified"),1)]),s[28]||(s[28]=(0,n.Lk)("li",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),e.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",U,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.volumeInfo["categories"],(e=>((0,n.uX)(),(0,n.CE)("li",{class:"genre",style:{"background-color":"grey"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",I,s[27]||(s[27]=[(0,n.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s=>i.select(e),class:"media_list_button"}," Select ",8,O)])])))),128))]),(0,n.Lk)("li",q,[(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:1==this.currentPage,onClick:s[12]||(s[12]=(...e)=>i.prevPage&&i.prevPage(...e))},"<",8,$),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page1?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page1?"bold":""}),disabled:i.page1>r.totalPages,onClick:s[13]||(s[13]=e=>i.changePage(i.page1))},(0,p.v_)(i.page1),13,N),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page2?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page2?"bold":""}),disabled:i.page2>r.totalPages,onClick:s[14]||(s[14]=e=>i.changePage(i.page2))},(0,p.v_)(i.page2),13,A),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page3?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page3?"bold":""}),disabled:i.page3>r.totalPages,onClick:s[15]||(s[15]=e=>i.changePage(i.page3))},(0,p.v_)(i.page3),13,R),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page4?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page4?"bold":""}),disabled:i.page4>r.totalPages,onClick:s[16]||(s[16]=e=>i.changePage(i.page4))},(0,p.v_)(i.page4),13,W),(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:this.currentPage>=r.totalPages,onClick:s[17]||(s[17]=(...e)=>i.nextPage&&i.nextPage(...e))},">",8,D)])])):(0,n.Q3)("",!0),1!=this.show_ChosenMedia||"Movies"!=this.searchMedia&&"TV Shows"!=this.searchMedia?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("img",{class:"chosen_media_img",src:"https://image.tmdb.org/t/p/original/"+r.chosenMedia.poster_path,alt:"Movie poster"},null,8,x),(0,n.Lk)("div",Q,[(0,n.Lk)("p",null,[s[29]||(s[29]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(r.chosenMedia.title||r.chosenMedia.name),1)]),(0,n.Lk)("p",null,[s[30]||(s[30]=(0,n.Lk)("b",null,"Released: ",-1)),(0,n.eW)(" "+(0,p.v_)(r.chosenMedia.release_date||r.chosenMedia.first_air_date||"Unavailable"),1)]),(0,n.Lk)("ul",j,[s[31]||(s[31]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Genres: ")],-1)),0==r.chosenMedia?.genre_ids?.length?((0,n.uX)(),(0,n.CE)("li",V,"Unknown")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.genre_ids,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:(0,p.Tr)({backgroundColor:i.getGenreColor(e)}),key:e},(0,p.v_)(i.getGenreName(e)),5)))),128))]),(0,n.Lk)("p",K,[s[32]||(s[32]=(0,n.Lk)("b",null,"Overview: ",-1)),(0,n.eW)(" "+(0,p.v_)(r.chosenMedia.overview||"Description unavailable"),1)])])])),1==this.show_ChosenMedia&&"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("img",{class:"chosen_media_img",src:r.chosenMedia.volumeInfo?.imageLinks?.thumbnail,alt:"Movie poster"},null,8,H),(0,n.Lk)("div",Y,[(0,n.Lk)("div",z,[(0,n.Lk)("p",Z,[s[33]||(s[33]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(r.chosenMedia.volumeInfo["title"]||"Title unavailable"),1)]),(0,n.Lk)("button",{class:"fav_btn",onClick:s[18]||(s[18]=e=>i.addToFavourites(r.chosenMedia))},"Add to Favourites")]),(0,n.Lk)("div",ee,[(0,n.Lk)("ul",se,[s[34]||(s[34]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.volumeInfo?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",oe,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",te,[s[35]||(s[35]=(0,n.Lk)("p",null,"Your rating: ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.stars,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e,onClick:s=>i.rateBook(e),onMouseover:s=>i.hoverStar(e),onMouseleave:s[19]||(s[19]=(...e)=>i.resetHover&&i.resetHover(...e)),class:(0,p.C4)(["star",{hovered:r.hoveredStar>=e,filled:r.rating>=e}])},[(0,n.Lk)("span",{innerHTML:r.hoveredStar>=e||r.rating>=e?"★":"☆"},null,8,ne)],42,ae)))),128))])]),(0,n.Lk)("p",null,[s[36]||(s[36]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)(" "+(0,p.v_)(r.chosenMedia.volumeInfo["publishedDate"]||"Not specified"),1)]),r.chosenMedia.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",re,[s[37]||(s[37]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),0==r.chosenMedia.volumeInfo?.categories?.length?((0,n.uX)(),(0,n.CE)("p",ie,"Unknown")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.volumeInfo?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",le,s[38]||(s[38]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",ce,[s[39]||(s[39]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)(" "+(0,p.v_)(r.chosenMedia.volumeInfo["description"]||"Description unavailable"),1)])])])):(0,n.Q3)("",!0)])}o(4114),o(8111),o(1701);const ue=(0,a.nY)("genre",{state:()=>({genreMap:{12:["Adventure","#FFD700"],14:["Fantasy","#8A2BE2"],16:["Animation","#FAA916"],18:["Drama","#1B1F1A"],27:["Horror","#8B0000"],28:["Action","#FF0000"],35:["Comedy","#FF8C00"],36:["History","#808000"],37:["Western","#D2691E"],53:["Thriller","#000080"],80:["Crime","#A9A9A9"],99:["Documentary","#3289D1"],878:["Science Fiction","#228B22"],9648:["Mystery","#800080"],10402:["Music","#FF1493"],10749:["Romance","#FF69B4"],10751:["Family","#DAA520"],10752:["War","#B22222"],10759:["Action & Adventure","#D2B48C"],10762:["Kids","#00BFFF"],10763:["News","#4682B4"],10764:["Reality","#FF4500"],10765:["Sci-Fi & Fantasy","#3A2C8D"],10766:["Soap","#E6A8D7"],10767:["Talk","#808080"],10768:["War & Politics","#556B2F"],10770:["TV Movie","#C71585"]}}),getters:{getGenreById:e=>s=>{const o=e.genreMap[s];return o?o[0]:"Unknown"},getGenreColorById:e=>s=>{const o=e.genreMap[s];return o?o[1]:"#FFFFFF"}}}),he={key:0,class:"modal-container"},ke={class:"modal"},_e={class:"modal-header"},ge={key:0,class:"list-container"},pe={key:0,class:"loading"},be=["src"],fe={class:"books_li_container"},ve={class:"books_li_div"},me={class:"book_div_title"},we={class:"books_li_authors"},ye={key:0,style:{"padding-right":"0.3rem"}},Le={style:{fontWeight:"900"}},Ce={class:"books_li_categories"},Ee={key:0,class:"category_ul"},Pe={key:1},Te=["onClick"],Be={key:1,class:"chosen_book_div"},Fe={class:"chosen_book_container"},Xe=["src"],Me={class:"chosen_book_div1"},Se={class:"div1_title"},Ue={class:"chosen_book_div1_title"},Ie={class:"chosen_book_authors"},Oe={class:"chosen_book_authors_div"},qe={key:0,style:{"padding-right":"0.3rem"}},$e={style:{fontWeight:"900"}},Ne={class:"star_rating_div_modal"},Ae=["onClick","onMouseover"],Re=["innerHTML"],We={key:0,class:"chosen_genre_list"},De={key:1,class:"chosen_genre_list"};function Ge(e,s,o,t,a,r){return o.isVisible?((0,n.uX)(),(0,n.CE)("div",he,[(0,n.Lk)("div",ke,[(0,n.Lk)("div",_e,[(0,n.Lk)("p",null,"Recommended books for: "+(0,p.v_)(o.mediaType)+" - "+(0,p.v_)(o.mediaName),1),(0,n.Lk)("div",null,[0==a.show_list?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>r.back&&r.back(...e)),class:"back"},"Back")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>r.close&&r.close(...e)),class:"close-button"},"Close")])]),a.show_list?((0,n.uX)(),(0,n.CE)("ul",ge,[0==o.recommendedBooks.length?((0,n.uX)(),(0,n.CE)("li",pe," Loading...")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.recommendedBooks,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"books_li",key:e.title},[(0,n.Lk)("img",{src:e.image,class:"book_image"},null,8,be),(0,n.Lk)("div",fe,[(0,n.Lk)("div",ve,[(0,n.Lk)("p",me,[s[4]||(s[4]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e.title||"Unavailable"),1)]),(0,n.Lk)("p",null,[s[5]||(s[5]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(e.published_date||"Unavailable"),1)]),(0,n.Lk)("div",we,[s[6]||(s[6]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),0==e?.authors?.length?((0,n.uX)(),(0,n.CE)("li",ye,"Unknown")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",Le,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",Ce,[s[8]||(s[8]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories:")],-1)),e.categories.length>0?((0,n.uX)(),(0,n.CE)("ul",Ee,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre",style:{"background-color":"darkblue"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",Pe,s[7]||(s[7]=[(0,n.Lk)("li",{style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"more_info",onClick:s=>r.more_info(e)},"More info",8,Te)])])))),128))])):(0,n.Q3)("",!0),0==a.show_list?((0,n.uX)(),(0,n.CE)("div",Be,[(0,n.Lk)("div",Fe,[(0,n.Lk)("img",{src:a.chosen_book.image,class:"chosen_book_image"},null,8,Xe),(0,n.Lk)("div",Me,[(0,n.Lk)("div",Se,[(0,n.Lk)("p",Ue,[s[9]||(s[9]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(a.chosen_book.title||"Unavailable"),1)]),(0,n.Lk)("button",{class:"fav_btn_modal",onClick:s[2]||(s[2]=e=>r.addToFavourites())},"Add to Favourites")]),(0,n.Lk)("ul",Ie,[(0,n.Lk)("div",Oe,[s[10]||(s[10]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),0==a.chosen_book?.authors?.length?((0,n.uX)(),(0,n.CE)("li",qe,"Unknown")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.chosen_book?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",$e,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",Ne,[s[11]||(s[11]=(0,n.Lk)("p",null,"Your rating: ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.stars,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e,onClick:s=>r.rateBook(e),onMouseover:s=>r.hoverStar(e),onMouseleave:s[3]||(s[3]=(...e)=>r.resetHover&&r.resetHover(...e)),class:(0,p.C4)(["star_modal",{hovered:a.hoveredStar>=e,filled:a.rating>=e}])},[(0,n.Lk)("span",{innerHTML:a.hoveredStar>=e||a.rating>=e?"★":"☆"},null,8,Re)],42,Ae)))),128))])]),(0,n.Lk)("p",null,[s[12]||(s[12]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)((0,p.v_)(a.chosen_book.published_date||"Unavailable"),1)]),a.chosen_book.categories.length>0?((0,n.uX)(),(0,n.CE)("ul",We,[s[13]||(s[13]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.chosen_book.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",De,s[14]||(s[14]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",null,[s[15]||(s[15]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)((0,p.v_)(a.chosen_book.description||"Unavailable"),1)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)}var xe={data(){return{show_list:!0,chosen_book:null,csrfToken:"",stars:[1,2,3,4,5],rating:0,hoveredStar:0,apiBaseUrl:d.apiBaseUrl}},props:["recommendedBooks","isVisible","mediaType","mediaName","loggedUser"],watch:{isVisible(e){e&&(this.show_list=!0,this.fetch_csrf_token())}},methods:{async fetch_csrf_token(){try{const e=await fetch(`${this.apiBaseUrl}/csrf/`,{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.csrfToken=s.csrfToken,console.log(`Fetched csrf token: ${this.csrfToken}`)}else console.log(`Failed to fetch token, ${e.statusText}`)}catch(e){console.error(`Error fetching token, ${e}`)}},async addToFavourites(){if(this.loggedUser)try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book:this.chosen_book,action:"add_book"}),credentials:"include"}),s=await e.json();if(!e.ok){if("Book is already added to favourites"!==s.error)throw new Error(`Failed to add book: ${e.status}`);alert("You have already added this book to your favourites")}}catch(e){console.error("Error adding book:",e)}else alert("You have to have an account to favourite a book.")},async fetch_book_rating(){if(this.loggedUser)try{const e=await fetch(`${this.apiBaseUrl}/book-rating/?book_id=${this.chosen_book.id}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch book: ${e.status}`);const s=await e.json();this.rating=s.book_rating||0}catch(e){console.error("Error fetching book:",e)}},async rateBook(e){if(this.loggedUser){this.rating=e;try{const s=await fetch(`${this.apiBaseUrl}/book-rating/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book_id:this.chosen_book.id,book_rating:e}),credentials:"include"});if(!s.ok)throw new Error(`Failed to add book: ${s.status}`)}catch(s){console.error("Error adding book:",s)}}else alert("You need to login to rate a book")},hoverStar(e){this.hoveredStar=e},resetHover(){this.hoveredStar=0},close(){this.$emit("update:isVisible",!1)},more_info(e){this.show_list=!1,this.chosen_book=e,this.fetch_book_rating()},back(){this.show_list=!0}},mounted(){this.fetch_csrf_token()}};const Qe=(0,h.A)(xe,[["render",Ge]]);var je=Qe,Ve={components:{RecommendModal:je},data(){return{query:"",mediaList:[],searchMedia:"Movies",show_ChosenMedia:!1,chosenMedia:null,currentPage:1,totalPages:1,showPageMultiplier:1,isModalVisible:!1,rcmndBooks:[],csrfToken:"",stars:[1,2,3,4,5],rating:0,hoveredStar:0,isLoading:!1,apiBaseUrl:d.apiBaseUrl}},setup(){const e=i();return{userStore:e}},computed:{genreStore(){return ue()},loggedUser(){return{id:this.userStore.user_id||null,online_id:this.userStore.online_id||null,favourite_genres:this.userStore.favourite_genres||[]}},page1(){return 4*this.showPageMultiplier-3},page2(){return 4*this.showPageMultiplier-2},page3(){return 4*this.showPageMultiplier-1},page4(){return 4*this.showPageMultiplier}},methods:{async fetch_csrf_token(){try{const e=await fetch(`${this.apiBaseUrl}/csrf/`,{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.csrfToken=s.csrfToken,console.log(`Fetched csrf token: ${this.csrfToken}`)}else console.log(`Failed to fetch csrf token: ${e.statusText}`)}catch(e){console.error(`Error fetching csrf token: ${e}`)}},async search(e=!1){if(this.isLoading=!0,e&&(this.currentPage=1,this.showPageMultiplier=1),"Movies"===this.searchMedia)try{const e=await fetch(`${this.apiBaseUrl}/search-movie/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.movies||[],this.currentPage=s.current_page,this.totalPages=s.total_pages,this.isLoading=!1}catch(s){console.error("Error:",s),this.isLoading=!1}else if("TV Shows"===this.searchMedia)try{const e=await fetch(`${this.apiBaseUrl}/search-show/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.shows||[],this.currentPage=s.current_page,this.totalPages=s.total_pages,this.isLoading=!1}catch(s){console.error("Error:",s),this.isLoading=!1}else if("Books"===this.searchMedia)try{const e=await fetch(`${this.apiBaseUrl}/search-book/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.books||[],this.currentPage=s.current_page,this.totalPages=s.total_pages,this.isLoading=!1}catch(s){console.error("Error:",s),this.isLoading=!1}},async recommendBooks(e){if(console.log("recommendBooks called with media:",e),!e)return void alert("Please select a movie, TV show, or book first to get recommendations.");const s={};"Movies"===this.searchMedia?(s["title"]=e.title||"",s["description"]=e.overview||"",s["genre"]=this.getGenresAsString(e.genre_ids)):"TV Shows"===this.searchMedia?(s["title"]=e.name||"",s["description"]=e.overview||"",s["genre"]=this.getGenresAsString(e.genre_ids)):"Books"===this.searchMedia&&(s["title"]=e.volumeInfo?.title||"",s["description"]=e.volumeInfo?.description||"",s["genre"]=this.getCategoriesAsString(e.volumeInfo?.categories)),console.log("Media map created:",s);const o=new URLSearchParams(s),t=`${this.apiBaseUrl}/get-recommendations/?${o.toString()}`;console.log("Recommendation URL:",t);try{console.log("Fetching recommendations...");const e=await fetch(t);if(!e.ok){const s=await e.text();throw console.error("Error response:",s),new Error(`Failed to fetch recommendations: ${e.status} ${e.statusText}`)}const s=await e.json();console.log("Received recommendations:",s),this.rcmndBooks=s.recommendations||[],this.isModalVisible=!0,console.log(`received ${this.rcmndBooks.length} recommendations`)}catch(a){console.error("Error fetching recommendations:",a),alert("Failed to get recommendations. Please try again.")}},async addToFavourites(e){if(!this.userStore.user_id)return void(window.location.href=`${this.apiBaseUrl}/login/`);const s={};s.id=e.id,s.title=e.volumeInfo?.title,s.authors=e.volumeInfo?.authors,s.description=e.volumeInfo?.description;try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book:s,action:"add_book"}),credentials:"include"}),o=await e.json();alert(`${o.message||"Success"}!`)}catch(o){console.error("Error:",o),alert("Failed to add to favourites. Please try again.")}},async check_book_rating(){if(this.userStore.user_id)try{const e=await fetch(`${this.apiBaseUrl}/book-rating/?book_id=${this.chosenMedia.id}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch book rating: ${e.statusText}`);const s=await e.json();s.book_rating&&(this.rating=s.book_rating)}catch(e){console.error(`Error fetching book rating: ${e}`)}},async rateBook(e){if(this.userStore.user_id){this.rating=e;try{const s=await fetch(`${this.apiBaseUrl}/book-rating/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book_id:this.chosenMedia?.id,book_rating:e}),credentials:"include"});if(!s.ok)throw new Error(`Failed to save book rating: ${s.statusText}`);const o=await s.json();console.log(o.message)}catch(s){console.error(`Error saving book rating: ${s}`),alert("Failed to save rating. Please try again.")}}else window.location.href=`${this.apiBaseUrl}/login/`},hoverStar(e){this.hoveredStar=e},resetHover(){this.hoveredStar=0},openModal(){this.isModalVisible=!0},toggleMedia(e){this.currentPage=1,this.showPageMultiplier=1,this.show_ChosenMedia=!1,this.searchMedia=e,this.mediaList=[],this.search(!0)},clearQuery(){this.currentPage=1,this.query="",this.mediaList=[],this.chosenMedia=null,this.show_ChosenMedia=!1,this.search(!0)},select(e){console.log("select method called with media:",e),e?(this.show_ChosenMedia=!0,this.chosenMedia=e,console.log("chosenMedia set to:",this.chosenMedia),"Books"===this.searchMedia&&this.check_book_rating(),this.query=e.title||e.name||e.volumeInfo?.title||"",console.log("Query updated to:",this.query),this.mediaList=[],this.currentPage=1):console.error("No media provided to select method")},getGenreName(e){return this.genreStore.getGenreById(e)},getGenreColor(e){return this.genreStore.getGenreColorById(e)},changePage(e){this.currentPage=e,this.search(!1),window.scrollTo({top:0,behavior:"smooth"})},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.currentPage>this.page4&&this.showPageMultiplier++,this.search(!1),window.scrollTo({top:0,behavior:"smooth"}))},prevPage(){this.page1==this.currentPage?(this.showPageMultiplier--,this.changePage(this.page4)):this.changePage(Number(this.currentPage)-1),this.search(!1),window.scrollTo({top:0,behavior:"smooth"})},redirectToLogin(){this.userStore.user_id?this.$router.push("/dashboard/"):window.location.href=`${this.apiBaseUrl}/login/`},getGenresAsString(e){return e&&Array.isArray(e)?e.map((e=>this.getGenreName(e))).join(","):""},getCategoriesAsString(e){return e&&Array.isArray(e)?e.join(","):""}},mounted(){this.search(!0),this.fetch_csrf_token()}};const Ke=(0,h.A)(Ve,[["render",de]]);var Je=Ke;o(2489),o(3579);const He={class:"page_container"},Ye={class:"dashboard_container"},ze={class:"user_info"},Ze={key:0,class:"user_info_list"},es={class:"user_info_li"},ss={class:"user_info_div"},os=["placeholder","readonly"],ts={key:1,class:"change_div"},as={class:"user_info_li"},ns={class:"user_info_div"},rs=["placeholder","readonly"],is={key:1,class:"change_div"},ls={class:"user_info_li"},cs={class:"user_info_div"},ds=["placeholder","readonly"],us={key:1,class:"change_div"},hs={key:1,class:"user_info_list"},ks={class:"user_info_li"},_s={class:"user_password_div"},gs=["type"],ps={class:"user_info_li"},bs={class:"user_password_div"},fs=["type"],vs={class:"user_info_li"},ms={class:"user_password_div"},ws=["type"],ys={class:"password_btn_div"},Ls={class:"genre_book_container"},Cs={class:"add_genre_container"},Es={class:"genre_div"},Ps={class:"user_genre_list"},Ts={key:0,class:"user_genre",style:{"background-color":"grey"}},Bs=["onClick"],Fs={class:"add_book_container"},Xs={class:"genre_div"},Ms={class:"favourite_book_ul"},Ss={key:0,class:"user_genre",style:{"background-color":"grey"}},Us=["src"],Is={class:"favourite_books_li_container"},Os={class:"favourite_books_li_div"},qs={class:"favourite_book_div_title"},$s={class:"favourite_book_div_published"},Ns={class:"favourite_books_li_authors"},As={style:{fontWeight:"900"}},Rs={class:"favourite_books_li_categories"},Ws={key:0,class:"favourite_category_ul"},Ds={key:1,class:"category_ul_modal"},Gs=["onClick"],xs={key:0,class:"genre_modal"},Qs={class:"genre_modal_container"},js={class:"genre_modal_div"},Vs={class:"add_genre_list"},Ks={key:0,class:"add_user_genre",style:{"background-color":"grey"}},Js=["onClick"],Hs={key:1,class:"genre_modal"},Ys={class:"book_modal_container"},zs={class:"book_modal_container_header"},Zs={key:0,class:"books_ul_container"},eo={class:"books_ul"},so={key:0,class:"no_more_books_dashboard"},oo=["src"],to={class:"books_li_container_modal"},ao={class:"books_li_div_modal"},no={class:"book_div_title_modal"},ro={class:"book_div_published_modal"},io={class:"books_li_authors_modal"},lo={style:{fontWeight:"900"}},co={class:"books_li_categories_modal"},uo={key:0,class:"category_ul_modal"},ho={key:1,class:"category_ul_modal"},ko=["onClick"],_o={key:0,class:"pagination_control_modal"},go=["disabled"],po=["disabled"],bo=["disabled"],fo=["disabled"],vo=["disabled"],mo=["disabled"],wo={key:1,class:"chosen_book_div_modal"},yo={class:"chosen_book_container_modal"},Lo=["src"],Co={class:"chosen_book_div1_modal"},Eo={class:"modal_title_div"},Po={class:"modal_title1"},To={class:"chosen_book_authors_dashboard"},Bo={class:"chosen_book_authors_dashboard_div"},Fo={style:{fontWeight:"900"}},Xo={class:"star_rating_div_dashboard"},Mo=["onClick","onMouseover"],So=["innerHTML"],Uo={key:0,class:"chosen_genre_list"},Io={key:1,class:"chosen_genre_list"};function Oo(e,s,o,a,r,i){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",He,[s[79]||(s[79]=(0,n.Lk)("h1",null,"User Dashboard",-1)),(0,n.bF)(l,{to:{name:"Main Page"}},{default:(0,n.k6)((()=>s[45]||(s[45]=[(0,n.eW)("Home")]))),_:1}),(0,n.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>i.logout&&i.logout(...e))},"Logout"),(0,n.bF)(l,{to:{name:"Social Page"}},{default:(0,n.k6)((()=>s[46]||(s[46]=[(0,n.eW)("Community")]))),_:1}),(0,n.Lk)("div",Ye,[(0,n.Lk)("div",ze,[s[53]||(s[53]=(0,n.Lk)("h2",{class:"user_info_header"},"User Information",-1)),0==r.changePassword?((0,n.uX)(),(0,n.CE)("ul",Ze,[(0,n.Lk)("li",es,[s[47]||(s[47]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Username")],-1)),(0,n.Lk)("div",ss,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[1]||(s[1]=e=>r.user_data.username=e),placeholder:r.user_data.username,readonly:r.readUsername,maxlength:"15"},null,8,os),[[t.Jo,r.user_data.username]]),1==r.readUsername?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[2]||(s[2]=(...e)=>i.changeUsername&&i.changeUsername(...e))},"Change")):0==r.readUsername?((0,n.uX)(),(0,n.CE)("div",ts,[(0,n.Lk)("button",{onClick:s[3]||(s[3]=(...e)=>i.saveUsername&&i.saveUsername(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[4]||(s[4]=(...e)=>i.cancelUsername&&i.cancelUsername(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("li",as,[s[48]||(s[48]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Online ID")],-1)),(0,n.Lk)("div",ns,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[5]||(s[5]=e=>r.user_data.online_id=e),placeholder:r.user_data.online_id,readonly:r.readOnlineId,maxlength:"15"},null,8,rs),[[t.Jo,r.user_data.online_id]]),1==r.readOnlineId?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[6]||(s[6]=(...e)=>i.changeOnlineId&&i.changeOnlineId(...e))},"Change")):0==r.readOnlineId?((0,n.uX)(),(0,n.CE)("div",is,[(0,n.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>i.saveOnlineId&&i.saveOnlineId(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[8]||(s[8]=(...e)=>i.cancelOnlineId&&i.cancelOnlineId(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("li",ls,[s[49]||(s[49]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Date of Birth")],-1)),(0,n.Lk)("div",cs,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_date","onUpdate:modelValue":s[9]||(s[9]=e=>r.user_data.DOB=e),placeholder:r.user_data.DOB,type:"date",readonly:r.readDOB,max:"2020-01-01"},null,8,ds),[[t.Jo,r.user_data.DOB]]),1==r.readDOB?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[10]||(s[10]=(...e)=>i.changeDOB&&i.changeDOB(...e))},"Change")):0==r.readDOB?((0,n.uX)(),(0,n.CE)("div",us,[(0,n.Lk)("button",{onClick:s[11]||(s[11]=(...e)=>i.saveDOB&&i.saveDOB(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[12]||(s[12]=(...e)=>i.cancelDOB&&i.cancelDOB(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("button",{class:"change_password_btn",onClick:s[13]||(s[13]=(...e)=>i.change_password&&i.change_password(...e))},"Change Password")])):(0,n.Q3)("",!0),1==r.changePassword?((0,n.uX)(),(0,n.CE)("ul",hs,[(0,n.Lk)("li",ks,[s[50]||(s[50]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Old Password")],-1)),(0,n.Lk)("div",_s,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[14]||(s[14]=e=>r.password_form.old_password=e),placeholder:"Enter Old Password",type:r.showOldPassword?"text":"password"},null,8,gs),[[t.hp,r.password_form.old_password]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[15]||(s[15]=(...e)=>i.show_OldPassword&&i.show_OldPassword(...e))},(0,p.v_)(r.showOldPassword?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[16]||(s[16]=(...e)=>i.clearOldPassword&&i.clearOldPassword(...e))},"Clear")])]),(0,n.Lk)("li",ps,[s[51]||(s[51]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"New Password")],-1)),(0,n.Lk)("div",bs,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[17]||(s[17]=e=>r.password_form.new_password_1=e),placeholder:"Enter New Password",type:r.showNewPassword1?"text":"password"},null,8,fs),[[t.hp,r.password_form.new_password_1]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[18]||(s[18]=(...e)=>i.show_NewPassword1&&i.show_NewPassword1(...e))},(0,p.v_)(r.showNewPassword1?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[19]||(s[19]=(...e)=>i.clearNewPassword1&&i.clearNewPassword1(...e))},"Clear")])]),(0,n.Lk)("li",vs,[s[52]||(s[52]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Confirm New Password")],-1)),(0,n.Lk)("div",ms,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[20]||(s[20]=e=>r.password_form.new_password_2=e),placeholder:"Re-enter New Password",type:r.showNewPassword2?"text":"password"},null,8,ws),[[t.hp,r.password_form.new_password_2]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[21]||(s[21]=(...e)=>i.show_NewPassword2&&i.show_NewPassword2(...e))},(0,p.v_)(r.showNewPassword2?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[22]||(s[22]=(...e)=>i.clearNewPassword2&&i.clearNewPassword2(...e))},"Clear")])]),(0,n.Lk)("div",ys,[(0,n.Lk)("button",{onClick:s[23]||(s[23]=(...e)=>i.updatePassword&&i.updatePassword(...e)),class:"update_btn"},"Update Password"),(0,n.Lk)("button",{onClick:s[24]||(s[24]=(...e)=>i.cancelPassword&&i.cancelPassword(...e)),class:"cancel_password_btn"},"Cancel")])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Ls,[(0,n.Lk)("div",Cs,[s[55]||(s[55]=(0,n.Lk)("h3",null,"Favourite Genres",-1)),(0,n.Lk)("div",Es,[s[54]||(s[54]=(0,n.Lk)("p",null,"Your Genres:",-1)),(0,n.Lk)("button",{class:"add_genre_btn",onClick:s[25]||(s[25]=(...e)=>i.openGenreModal&&i.openGenreModal(...e))},"Add Genre")]),(0,n.Lk)("ul",Ps,[0==r.user_data.favourite_genres.length?((0,n.uX)(),(0,n.CE)("li",Ts,"No genres added yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.user_data.favourite_genres,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"user_genre",style:(0,p.Tr)({backgroundColor:e[1]})},[(0,n.eW)((0,p.v_)(e[0])+" ",1),(0,n.Lk)("button",{class:"delete_genre_btn",onClick:s=>i.deleteGenre(e[0])},"-",8,Bs)],4)))),128))])]),(0,n.Lk)("div",Fs,[s[62]||(s[62]=(0,n.Lk)("h3",null,"Favourite Books",-1)),(0,n.Lk)("div",Xs,[s[56]||(s[56]=(0,n.Lk)("p",null,"Your Books:",-1)),(0,n.Lk)("button",{class:"add_genre_btn",onClick:s[26]||(s[26]=(...e)=>i.openBookModal&&i.openBookModal(...e))},"Add Book")]),(0,n.Lk)("ul",Ms,[0==r.user_data?.favourite_books?.length?((0,n.uX)(),(0,n.CE)("li",Ss,"No books added yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.user_data.favourite_books,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"favourite_book_li",key:e},[(0,n.Lk)("img",{src:e?.image,class:"favourite_book_image"},null,8,Us),(0,n.Lk)("div",Is,[(0,n.Lk)("div",Os,[(0,n.Lk)("p",qs,[s[57]||(s[57]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e?.title),1)]),(0,n.Lk)("p",$s,[s[58]||(s[58]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(e?.published_date||"Not specified"),1)]),(0,n.Lk)("div",Ns,[s[59]||(s[59]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",As,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",Rs,[s[61]||(s[61]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Categories:")],-1)),e?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",Ws,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre_modal",style:{"background-color":"darkblue"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",Ds,s[60]||(s[60]=[(0,n.Lk)("li",{class:"rcmnd_genre_modal",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"favourite_more_info",onClick:s=>i.moreInfo(e,!0)},"More info",8,Gs)])])))),128))])])]),1==r.openAddGenre?((0,n.uX)(),(0,n.CE)("div",xs,[(0,n.Lk)("div",Qs,[s[64]||(s[64]=(0,n.Lk)("h4",null,"Add Genres",-1)),(0,n.Lk)("div",js,[s[63]||(s[63]=(0,n.Lk)("p",null,"Choose from genres below",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":s[27]||(s[27]=e=>r.newGenreName=e),placeholder:"Enter your own genre",maxlength:"25"},null,512),[[t.Jo,r.newGenreName]]),(0,n.Lk)("button",{onClick:s[28]||(s[28]=(...e)=>i.addNewGenre&&i.addNewGenre(...e))},"Add")]),(0,n.Lk)("ul",Vs,[0==r.genreList.filter((e=>!r.user_data.favourite_genres.some((s=>s[0]===e[0])))).length?((0,n.uX)(),(0,n.CE)("li",Ks,"No more genres available to add")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.genreList.filter((e=>!r.user_data.favourite_genres.some((s=>s[0]===e[0])))),(e=>((0,n.uX)(),(0,n.CE)("li",{key:e[0],class:"add_user_genre",style:(0,p.Tr)({backgroundColor:e[1]})},[(0,n.eW)((0,p.v_)(e[0]),1),(0,n.Lk)("button",{onClick:s=>i.addGenre(e[0]),class:"add_existing_genre_btn"},"+",8,Js)],4)))),128))]),(0,n.Lk)("button",{onClick:s[29]||(s[29]=(...e)=>i.cancelAddGenre&&i.cancelAddGenre(...e)),class:"cancel_add_genre_btn"},"Exit")])])):(0,n.Q3)("",!0),1==r.openAddBook?((0,n.uX)(),(0,n.CE)("div",Hs,[(0,n.Lk)("div",Ys,[(0,n.Lk)("div",zs,[s[65]||(s[65]=(0,n.Lk)("h4",null,"Add Books",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":s[30]||(s[30]=e=>r.query=e),onInput:s[31]||(s[31]=e=>i.searchBook(!0)),type:"text",placeholder:"Search Books - Trending Books"},null,544),[[t.Jo,r.query]]),(0,n.Lk)("button",{onClick:s[32]||(s[32]=(...e)=>i.clearQuery&&i.clearQuery(...e)),class:"clear_book_btn"},"×"),0==r.showList?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"book_back_btn",onClick:s[33]||(s[33]=(...e)=>i.backToShowList&&i.backToShowList(...e))},"Back")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s[34]||(s[34]=(...e)=>i.exitAddBook&&i.exitAddBook(...e)),class:"cancel_add_book_btn"},"Exit")]),1==r.showList?((0,n.uX)(),(0,n.CE)("ul",Zs,[(0,n.Lk)("div",eo,[0==r.searchedBooks.length&&0==r.isLoading?((0,n.uX)(),(0,n.CE)("div",so,[s[66]||(s[66]=(0,n.Lk)("p",null,"No more book results",-1)),(0,n.Lk)("button",{onClick:s[35]||(s[35]=e=>i.searchBook(!0))},"Go Back")])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.searchedBooks,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"books_li_modal",key:e.id},[(0,n.Lk)("img",{src:e.volumeInfo?.imageLinks?.thumbnail,class:"book_image_modal"},null,8,oo),(0,n.Lk)("div",to,[(0,n.Lk)("div",ao,[(0,n.Lk)("p",no,[s[67]||(s[67]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e.volumeInfo?.title),1)]),(0,n.Lk)("p",ro,[s[68]||(s[68]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(e.volumeInfo?.publishedDate||"Not specified"),1)]),(0,n.Lk)("div",io,[s[69]||(s[69]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.volumeInfo?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",lo,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",co,[s[71]||(s[71]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Categories:")],-1)),e.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",uo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.volumeInfo?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre_modal",style:{"background-color":"darkblue"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",ho,s[70]||(s[70]=[(0,n.Lk)("li",{class:"rcmnd_genre_modal",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"more_info_modal",onClick:s=>i.moreInfo(e,!1)},"Select",8,ko)])])))),128))]),0!=r.searchedBooks.length?((0,n.uX)(),(0,n.CE)("ul",_o,[(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:1==this.currentPage,onClick:s[36]||(s[36]=(...e)=>i.prevPage&&i.prevPage(...e))},"<",8,go),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page1?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page1?"bold":""}),disabled:i.page1>r.totalPages,onClick:s[37]||(s[37]=e=>i.changePage(i.page1))},(0,p.v_)(i.page1),13,po),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page2?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page2?"bold":""}),disabled:i.page2>r.totalPages,onClick:s[38]||(s[38]=e=>i.changePage(i.page2))},(0,p.v_)(i.page2),13,bo),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page3?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page3?"bold":""}),disabled:i.page3>r.totalPages,onClick:s[39]||(s[39]=e=>i.changePage(i.page3))},(0,p.v_)(i.page3),13,fo),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,p.Tr)({backgroundColor:this.currentPage==i.page4?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==i.page4?"bold":""}),disabled:i.page4>r.totalPages,onClick:s[40]||(s[40]=e=>i.changePage(i.page4))},(0,p.v_)(i.page4),13,vo),(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:this.currentPage>=r.totalPages,onClick:s[41]||(s[41]=(...e)=>i.nextPage&&i.nextPage(...e))},">",8,mo)])):(0,n.Q3)("",!0)])):0==r.showList?((0,n.uX)(),(0,n.CE)("div",wo,[(0,n.Lk)("div",yo,[(0,n.Lk)("img",{src:r.chosen_book?.image,class:"chosen_book_image_modal"},null,8,Lo),(0,n.Lk)("div",Co,[(0,n.Lk)("div",Eo,[(0,n.Lk)("p",Po,[s[72]||(s[72]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(r.chosen_book?.title||"Title unavailable"),1)]),1==i.isBookInFavourites(r.chosen_book)?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"favourite_book_btn",onClick:s[42]||(s[42]=(...e)=>i.deleteFavouriteBook&&i.deleteFavouriteBook(...e))},"Unfavourite")):0==i.isBookInFavourites(r.chosen_book)?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"favourite_book_btn",onClick:s[43]||(s[43]=(...e)=>i.addFavouriteBook&&i.addFavouriteBook(...e))},"Add to Favourites")):(0,n.Q3)("",!0)]),(0,n.Lk)("ul",To,[(0,n.Lk)("div",Bo,[s[73]||(s[73]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosen_book?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",Fo,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",Xo,[s[74]||(s[74]=(0,n.Lk)("p",null,"Your rating: ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.stars,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e,onClick:s=>i.rateBook(e),onMouseover:s=>i.hoverStar(e),onMouseleave:s[44]||(s[44]=(...e)=>i.resetHover&&i.resetHover(...e)),class:(0,p.C4)(["star_dashboard",{hovered:r.hoveredStar>=e,filled:r.rating>=e}])},[(0,n.Lk)("span",{innerHTML:r.hoveredStar>=e||r.rating>=e?"★":"☆"},null,8,So)],42,Mo)))),128))])]),(0,n.Lk)("p",null,[s[75]||(s[75]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)((0,p.v_)(r.chosen_book?.published_date),1)]),r.chosen_book?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",Uo,[s[76]||(s[76]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosen_book?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,p.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",Io,s[77]||(s[77]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",null,[s[78]||(s[78]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)((0,p.v_)(r.chosen_book?.description||"Description unavailable"),1)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])])}var qo={name:"DashboardPage",data(){return{user_data:{username:"",online_id:"",DOB:"",favourite_genres:[],favourite_books:[]},readUsername:!0,readOnlineId:!0,readDOB:!0,changePassword:!1,password_form:{old_password:"",new_password_1:"",new_password_2:""},showOldPassword:!1,showNewPassword1:!1,showNewPassword2:!1,genreList:[],openAddGenre:!1,newGenreName:"",query:"",isLoading:!1,searchedBooks:[],totalPages:1,currentPage:1,showPageMultiplier:1,openAddBook:!1,showList:!0,chosen_book:null,rating:0,hoveredStar:0,stars:[1,2,3,4,5],csrfToken:"",apiBaseUrl:d.apiBaseUrl}},computed:{page1(){return 4*this.showPageMultiplier-3},page2(){return 4*this.showPageMultiplier-2},page3(){return 4*this.showPageMultiplier-1},page4(){return 4*this.showPageMultiplier},userStore(){return i()}},methods:{async fetch_csrf_token(){try{const e=await fetch(`${this.apiBaseUrl}/csrf/`,{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.csrfToken=s.csrfToken,console.log(`Fetched csrf token: ${this.csrfToken}`)}else console.log(`Failed to fetch token, ${e.statusText}`)}catch(e){console.error(`Error fetching token, ${e}`)}},async fetch_user(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(e.ok){const s=await e.json();this.user_data=s,this.user_data.favourite_genres=s.favourite_genres,this.userStore.setUser(s.id,s.username,s.online_id,s.favourite_genres),console.log("Fetched user data")}}catch(e){console.error(`${e}`)}},async searchBook(e){this.showList=!0,this.chosen_book={},this.isLoading=!0,1==e&&(this.currentPage=1,this.showPageMultiplier=1);try{const e=await fetch(`${this.apiBaseUrl}/search-book/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.searchedBooks=s.books||[],this.currentPage=s.current_page||1,this.totalPages=s.total_pages||1}catch(s){console.error("error catching data",s)}this.isLoading=!1},async logout(){try{const e=await fetch(`${this.apiBaseUrl}/logout/`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error("Failed to logout");const s=await e.json();s.success&&(this.userStore.clearUser(),window.location.href="/login/")}catch(e){console.error("error logging out",e)}},backToShowList(){this.showList=!0,this.chosen_book={}},exitAddBook(){this.openAddBook=!1,this.clearQuery(),this.chosen_book={}},clearQuery(){this.query="",this.searchBook(!0)},changePage(e){this.currentPage=e,this.searchBook(!1)},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.currentPage>this.page4&&this.showPageMultiplier++,this.searchBook(!1))},prevPage(){this.page1==this.currentPage?(this.showPageMultiplier--,this.changePage(this.page4)):this.changePage(Number(this.currentPage)-1),this.searchBook(!1)},openBookModal(){this.openAddBook=!0,this.showList=!0},moreInfo(e,s){0==s?(this.chosen_book.id=e.id,this.chosen_book.image=e.volumeInfo?.imageLinks?.thumbnail,this.chosen_book.title=e.volumeInfo?.title,this.chosen_book.authors=e.volumeInfo?.authors,this.chosen_book.published_date=e.volumeInfo["publishedDate"]||"Not specified",this.chosen_book.categories=e.volumeInfo?.categories,this.chosen_book.description=e.volumeInfo?.description):(this.chosen_book=e,this.openAddBook=!0),this.fetch_book_rating(),this.showList=!1},async addFavouriteBook(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book:this.chosen_book,action:"add_book"}),credentials:"include"}),s=await e.json();if(!e.ok){if("Book is already added to favourites"!==s.error)throw new Error(`Failed to add book: ${e.status}`);alert("You have already added this book to your favourites")}this.fetch_user()}catch(e){console.error("Error adding book:",e)}},async deleteFavouriteBook(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book:this.chosen_book,action:"delete_book"}),credentials:"include"});if(!e.ok)throw new Error(`Failed to remove book: ${e.status}`);this.fetch_user()}catch(e){console.error("Error removing book:",e)}},isBookInFavourites(e){return this.user_data.favourite_books.some((s=>s.title===e.title))},async saveUsername(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({username:this.user_data.username})});e.ok&&(console.log("Username updated successfully"),this.readUsername=!0,this.fetch_user())}catch(e){console.error("Error updating username:",e)}},changeUsername(){this.readUsername=!1,this.cancelOnlineId(),this.cancelDOB()},cancelUsername(){this.fetch_user(),this.readUsername=!0},async saveOnlineId(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({online_id:this.user_data.online_id})});e.ok&&(console.log("Online ID updated successfully"),this.readOnlineId=!0,this.fetch_user())}catch(e){console.error("Error updating online ID:",e)}},changeOnlineId(){this.readOnlineId=!1,this.cancelUsername(),this.cancelDOB()},cancelOnlineId(){this.fetch_user(),this.readOnlineId=!0},async saveDOB(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({DOB:this.user_data.DOB})});e.ok&&(console.log("DOB updated successfully"),this.readDOB=!0,this.fetch_user())}catch(e){console.error("Error updating DOB:",e)}},changeDOB(){this.readDOB=!1,this.cancelUsername(),this.cancelOnlineId()},cancelDOB(){this.fetch_user(),this.readDOB=!0},change_password(){this.cancelUsername(),this.cancelOnlineId(),this.cancelDOB(),this.changePassword=!0},cancelPassword(){this.password_form.old_password="",this.password_form.new_password_1="",this.password_form.new_password_2="",this.changePassword=!1},async updatePassword(){try{const e=await fetch(`${this.apiBaseUrl}/user/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({action:"change_password",old_password:this.password_form.old_password,new_password1:this.password_form.new_password_1,new_password2:this.password_form.new_password_2})}),s=await e.json();if(!e.ok){let e=Object.values(s.errors||{}).flat().join("\n");throw new Error(e||"Unexpected error occured when changing password")}this.cancelPassword()}catch(e){console.error("Error:",e),alert(e)}},show_OldPassword(){this.showOldPassword=!this.showOldPassword},show_NewPassword1(){this.showNewPassword1=!this.showNewPassword1},show_NewPassword2(){this.showNewPassword2=!this.showNewPassword2},clearOldPassword(){this.password_form.old_password=""},clearNewPassword1(){this.password_form.new_password_1=""},clearNewPassword2(){this.password_form.new_password_2=""},openGenreModal(){this.openAddGenre=!0},async deleteGenre(e){try{const s=await fetch(`${this.apiBaseUrl}/user/`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:e,action:"delete_genre"}),credentials:"include"});if(!s.ok)throw new Error(`Failed to remove genre: ${s.status}`);this.fetch_user()}catch(s){console.error("Error removing genre:",s)}},async addGenre(e){try{const s=await fetch(`${this.apiBaseUrl}/user/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:e,action:"add_genre"}),credentials:"include"});if(!s.ok)throw new Error(`Failed to add genre: ${s.status}`);this.fetch_user()}catch(s){console.error("Error adding genre:",s)}},async addNewGenre(){if(this.newGenreName&&0!=this.newGenreName.trim().length)try{const e=await fetch(`${this.apiBaseUrl}/genre/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:this.newGenreName}),credentials:"include"});if(!e.ok)throw new Error(`Failed to add new genre: ${e.status}`);let s=await e.json(),o=s.genre_name;this.addGenre(o),this.newGenreName="",this.fetch_user(),this.fetch_genres()}catch(e){console.error("Error adding new genre:",e),alert("Error:"+e.message)}else alert("Please provide a new genre name")},async fetch_genres(){try{const e=await fetch(`${this.apiBaseUrl}/genre/`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch genres: ${e.status}`);this.genreList=await e.json()}catch(e){console.error("Error fetching genres:",e)}},cancelAddGenre(){this.openAddGenre=!1},async fetch_book_rating(){try{const e=await fetch(`${this.apiBaseUrl}/book-rating/?book_id=${this.chosen_book.id}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch book: ${e.status}`);const s=await e.json();this.rating=s.book_rating||0}catch(e){console.error("Error fetching book:",e)}},async rateBook(e){this.rating=e;try{const s=await fetch(`${this.apiBaseUrl}/book-rating/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book_id:this.chosen_book.id,book_rating:e}),credentials:"include"});if(!s.ok)throw new Error(`Failed to add book: ${s.status}`)}catch(s){console.error("Error adding book:",s)}},hoverStar(e){this.hoveredStar=e},resetHover(){this.hoveredStar=0}},async mounted(){await this.fetch_csrf_token(),this.fetch_user(),this.fetch_genres(),this.searchBook()}};const $o=(0,h.A)(qo,[["render",Oo]]);var No=$o;const Ao={class:"social_container"},Ro={class:"user_list_container"},Wo={class:"sort_filter_container"},Do={class:"sort_by_container"},Go={class:"filter_by_container"},xo={key:0,class:"user_box_not_found"},Qo={class:"user_box_header"},jo={key:0,class:"add_friend_btn"},Vo=["onClick"],Ko={class:"user_list_genre_container"},Jo={key:0,class:"user_list_genre"},Ho=["onClick"],Yo={key:0,class:"other_user_modal"},zo={class:"other_user_modal_container"},Zo={class:"other_user_modal_header"},et={key:0},st={key:1},ot={class:"header_button_div"},tt=["onClick"],at={key:0,class:"other_user_info_div"},nt={class:"other_user_genre_container"},rt={key:0,class:"other_user_genre"},it={class:"other_user_book_container"},lt={key:0},ct=["src"],dt={class:"other_user_book_info_div"},ut={class:"other_user_book_info_title"},ht={class:"other_user_book_info_authors"},kt={key:0},_t={style:{fontWeight:"900"}},gt={class:"other_user_book_info_genres"},pt={key:0,style:{"background-color":"grey"},class:"other_book_genre"},bt=["onClick"],ft={key:1,class:"more_info_book_div"},vt=["src"],mt={class:"more_info_info_div"},wt={class:"more_info_info_authors"},yt={key:0},Lt={style:{fontWeight:"900"}},Ct={class:"more_info_info_genres_container"},Et={key:0,style:{"background-color":"grey"},class:"more_info_info_genre"},Pt={style:{"margin-top":"0.5rem"}},Tt={class:"pagination_container"},Bt=["disabled"],Ft=["disabled"],Xt={class:"other_container"},Mt={class:"social_page_nav"},St={class:"friend_request_container"},Ut={class:"friend_request_btn_container"},It={class:"friend_request_type_btns"},Ot=["disabled"],qt=["disabled"],$t={class:"friend_request_status_btns"},Nt=["disabled"],At=["disabled"],Rt={key:0,class:"friend_request_ul"},Wt={key:0},Dt={key:1,class:"request_action_btns"},Gt=["onClick"],xt=["onClick"],Qt={key:0,class:"no_request_li"},jt={key:1,class:"friend_request_ul1"},Vt={key:0},Kt={key:1},Jt={key:0,class:"no_request_li"};function Ht(e,s,o,a,r,i){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Ao,[(0,n.Lk)("div",Ro,[s[30]||(s[30]=(0,n.Lk)("h1",null,"Other Users",-1)),(0,n.Lk)("div",Wo,[(0,n.Lk)("div",Do,[(0,n.Lk)("button",{class:"sort_button",onClick:s[0]||(s[0]=(...e)=>i.fetch_all_user&&i.fetch_all_user(...e))},"Sort by"),(0,n.bo)((0,n.Lk)("select",{class:"sort_select","onUpdate:modelValue":s[1]||(s[1]=e=>r.sortBy=e)},s[13]||(s[13]=[(0,n.Lk)("option",{value:"Most Common"},"Most Common Genres",-1),(0,n.Lk)("option",{value:"Least Common"},"Least Common Genres ",-1)]),512),[[t.u1,r.sortBy]])]),(0,n.Lk)("div",Go,[(0,n.Lk)("button",{class:"filter_button",onClick:s[2]||(s[2]=(...e)=>i.fetch_all_user&&i.fetch_all_user(...e))},"Filter"),s[14]||(s[14]=(0,n.Lk)("label",null,"Min age:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",min:"10",max:"100","onUpdate:modelValue":s[3]||(s[3]=e=>r.minAge=e)},null,512),[[t.Jo,r.minAge,void 0,{number:!0}]]),s[15]||(s[15]=(0,n.Lk)("label",null,"Max age:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=e=>r.maxAge=e),min:"10",max:"100"},null,512),[[t.Jo,r.maxAge,void 0,{number:!0}]]),(0,n.Lk)("button",{class:"reset_button",onClick:s[5]||(s[5]=(...e)=>i.reset&&i.reset(...e))},"Reset")])]),0==r.userList.length?((0,n.uX)(),(0,n.CE)("li",xo," No users found")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.userList,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"user_box"},[(0,n.Lk)("div",Qo,[(0,n.Lk)("p",null,[s[16]||(s[16]=(0,n.Lk)("b",null,"Online ID: ",-1)),(0,n.eW)((0,p.v_)(e.online_id),1)]),1==e.is_friend?((0,n.uX)(),(0,n.CE)("button",jo,"Friend")):(0,n.Q3)("",!0),0==e.is_friend?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"add_friend_btn",onClick:s=>i.sendFriendRequest(e.id)},"Add Friend",8,Vo)):(0,n.Q3)("",!0)]),s[29]||(s[29]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Favourite genres:")],-1)),(0,n.Lk)("ul",Ko,[0==e.favourite_genres.length?((0,n.uX)(),(0,n.CE)("li",Jo,"No genres added yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.favourite_genres,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,style:(0,p.Tr)({backgroundColor:e[1]}),class:"user_list_genre"},(0,p.v_)(e[0]),5)))),128))]),(0,n.Lk)("button",{class:"view_more_btn",onClick:s=>i.viewMore(e)},"View More",8,Ho),1==e.showMore?((0,n.uX)(),(0,n.CE)("div",Yo,[(0,n.Lk)("div",zo,[(0,n.Lk)("div",Zo,[0==r.showMoreInfo?((0,n.uX)(),(0,n.CE)("h1",et,"User Profile")):(0,n.Q3)("",!0),1==r.showMoreInfo?((0,n.uX)(),(0,n.CE)("h1",st,"Book Information")):(0,n.Q3)("",!0),(0,n.Lk)("div",ot,[1==r.showMoreInfo?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s[6]||(s[6]=(...e)=>i.backPage&&i.backPage(...e)),class:"back_btn"},"Back")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s=>i.closeViewMore(e),class:"close_btn"},"Close",8,tt)])]),0==r.showMoreInfo?((0,n.uX)(),(0,n.CE)("div",at,[(0,n.Lk)("p",null,[s[17]||(s[17]=(0,n.Lk)("b",null,"Online ID: ",-1)),(0,n.eW)((0,p.v_)(e.online_id),1)]),s[22]||(s[22]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Favourite Genres:")],-1)),(0,n.Lk)("ul",nt,[0==e.favourite_genres.length?((0,n.uX)(),(0,n.CE)("li",rt,"No genres added yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.favourite_genres,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,style:(0,p.Tr)({backgroundColor:e[1]}),class:"other_user_genre"},(0,p.v_)(e[0]),5)))),128))]),s[23]||(s[23]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Favourite Books:")],-1)),(0,n.Lk)("ul",it,[0==e.favourite_books.length?((0,n.uX)(),(0,n.CE)("li",lt," User has not favourited any books yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.favourite_books,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"other_user_book_li"},[(0,n.Lk)("img",{src:e.image,class:"other_user_book_img"},null,8,ct),(0,n.Lk)("div",dt,[(0,n.Lk)("p",ut,[s[18]||(s[18]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(e.title||"Unavailable"),1)]),(0,n.Lk)("p",null,[s[19]||(s[19]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(e.published_date||"Unavailable"),1)]),(0,n.Lk)("ul",ht,[s[20]||(s[20]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Authors: ")],-1)),e.authors&&0!==e.authors.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",kt,"Unavailable")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"text-align":"left"},key:s},[(0,n.Lk)("span",_t,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("ul",gt,[s[21]||(s[21]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Genres: ")],-1)),e.categories&&0!==e.categories.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",pt,"Unavailable")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"other_book_genre"},(0,p.v_)(e),1)))),128))]),(0,n.Lk)("button",{onClick:s=>i.moreInfo(e),class:"other_book_more_info_btn"},"More Info",8,bt)])])))),128))])])):(0,n.Q3)("",!0),1==r.showMoreInfo?((0,n.uX)(),(0,n.CE)("div",ft,[(0,n.Lk)("img",{src:r.moreInfoBook.image,class:"more_info_book_img"},null,8,vt),(0,n.Lk)("div",mt,[(0,n.Lk)("p",null,[s[24]||(s[24]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,p.v_)(r.moreInfoBook.title||"Unavailable"),1)]),(0,n.Lk)("p",null,[s[25]||(s[25]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,p.v_)(r.moreInfoBook.published_date||"Unavailable"),1)]),(0,n.Lk)("ul",wt,[s[26]||(s[26]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Authors: ")],-1)),r.moreInfoBook.authors&&0!==r.moreInfoBook.authors.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",yt,"Unavailable")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.moreInfoBook?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"text-align":"left"},key:s},[(0,n.Lk)("span",Lt,(0,p.v_)(e.charAt(0)),1),(0,n.eW)((0,p.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("ul",Ct,[s[27]||(s[27]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Genres: ")],-1)),r.moreInfoBook.categories&&0!==r.moreInfoBook.categories.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",Et,"Unavailable")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.moreInfoBook.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"more_info_info_genre"},(0,p.v_)(e),1)))),128))]),(0,n.Lk)("p",Pt,[s[28]||(s[28]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)((0,p.v_)(r.moreInfoBook.description||"Unavailable"),1)])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])))),128)),(0,n.Lk)("div",Tt,[(0,n.Lk)("button",{disabled:0==r.hasPrevious,onClick:s[7]||(s[7]=e=>i.prevPage()),class:"pagination_button"},"Previous",8,Bt),(0,n.Lk)("button",{disabled:0==r.hasNext,onClick:s[8]||(s[8]=e=>i.nextPage()),class:"pagination_button"},"Next",8,Ft)])]),(0,n.Lk)("div",Xt,[(0,n.Lk)("nav",Mt,[(0,n.bF)(l,{class:"nav_btn_dashboard",to:{name:"Dashboard Page"}},{default:(0,n.k6)((()=>s[31]||(s[31]=[(0,n.eW)("Dashboard")]))),_:1}),(0,n.bF)(l,{class:"nav_btn_search_books",to:{name:"Main Page"}},{default:(0,n.k6)((()=>s[32]||(s[32]=[(0,n.eW)("Search Books")]))),_:1})]),(0,n.Lk)("div",St,[s[38]||(s[38]=(0,n.Lk)("h2",null,"Your Inbox",-1)),(0,n.Lk)("div",Ut,[(0,n.Lk)("div",It,[(0,n.Lk)("button",{class:(0,p.C4)(["friend_request_type_button1",{active:"incoming request"===r.showRequestType}]),disabled:"incoming request"===r.showRequestType,onClick:s[9]||(s[9]=e=>r.showRequestType="incoming request")},"Incoming",10,Ot),(0,n.Lk)("button",{class:(0,p.C4)(["friend_request_type_button2",{active:"outgoing request"===r.showRequestType}]),disabled:"outgoing request"===r.showRequestType,onClick:s[10]||(s[10]=e=>r.showRequestType="outgoing request")},"Outgoing",10,qt)]),(0,n.Lk)("div",$t,[(0,n.Lk)("button",{class:(0,p.C4)(["friend_request_status_button1",{active:"pending"===r.showRequestStatus}]),disabled:"pending"===r.showRequestStatus,onClick:s[11]||(s[11]=e=>r.showRequestStatus="pending")},"Pending",10,Nt),(0,n.Lk)("button",{class:(0,p.C4)(["friend_request_status_button2",{active:"declined"===r.showRequestStatus}]),disabled:"declined"===r.showRequestStatus,onClick:s[12]||(s[12]=e=>r.showRequestStatus="declined")},"Declined",10,At)])]),"incoming request"===r.showRequestType&&"pending"===r.showRequestStatus?((0,n.uX)(),(0,n.CE)("ul",Rt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.friendRequestList.filter((e=>e.type==r.showRequestType&&e.status==r.showRequestStatus)),(e=>((0,n.uX)(),(0,n.CE)("li",{class:"friend_request_li",key:e},["incoming request"==e.type?((0,n.uX)(),(0,n.CE)("p",Wt,[s[33]||(s[33]=(0,n.Lk)("b",null,"From: ",-1)),(0,n.eW)((0,p.v_)(e.from_user_online_id),1)])):(0,n.Q3)("",!0),(0,n.Lk)("p",null,[s[34]||(s[34]=(0,n.Lk)("b",null,"Status: ",-1)),(0,n.eW)((0,p.v_)(e.status),1)]),"incoming request"==e.type&&"pending"==e.status?((0,n.uX)(),(0,n.CE)("div",Dt,[(0,n.Lk)("button",{onClick:s=>i.acceptRequest(e.id),class:"accept_btn"}," Accept",8,Gt),(0,n.Lk)("button",{onClick:s=>i.declineRequest(e.id),class:"decline_btn"}," Decline",8,xt)])):(0,n.Q3)("",!0)])))),128)),0==r.friendRequestList.filter((e=>e.type==r.showRequestType&&e.status==r.showRequestStatus)).length?((0,n.uX)(),(0,n.CE)("li",Qt," No Requests ")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),"incoming request"!=r.showRequestType||"pending"!=r.showRequestStatus?((0,n.uX)(),(0,n.CE)("ul",jt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.friendRequestList.filter((e=>e.type==r.showRequestType&&e.status==r.showRequestStatus)),(e=>((0,n.uX)(),(0,n.CE)("li",{class:"friend_request_li1",key:e},["incoming request"==e.type?((0,n.uX)(),(0,n.CE)("p",Vt,[s[35]||(s[35]=(0,n.Lk)("b",null,"From: ",-1)),(0,n.eW)((0,p.v_)(e.from_user_online_id),1)])):(0,n.Q3)("",!0),"outgoing request"==e.type?((0,n.uX)(),(0,n.CE)("p",Kt,[s[36]||(s[36]=(0,n.Lk)("b",null,"To: ",-1)),(0,n.eW)((0,p.v_)(e.to_user_online_id),1)])):(0,n.Q3)("",!0),(0,n.Lk)("p",null,[s[37]||(s[37]=(0,n.Lk)("b",null,"Status: ",-1)),(0,n.eW)((0,p.v_)(e.status),1)])])))),128)),0==r.friendRequestList.filter((e=>e.type==r.showRequestType&&e.status==r.showRequestStatus)).length?((0,n.uX)(),(0,n.CE)("li",Jt," No Requests ")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])])])}var Yt={data(){return{userList:[],csrfToken:"",sortBy:"Most Common",minAge:null,maxAge:null,currentPage:1,totalPages:1,hasNext:!1,hasPrevious:!1,friendRequestList:[],friendshipList:[],showMoreInfo:!1,moreInfoBook:{},showRequestType:"incoming request",showRequestStatus:"pending",apiBaseUrl:d.apiBaseUrl}},setup(){const e=i();return{userStore:e}},computed:{loggedUser(){return{id:this.userStore.user_id||null,online_id:this.userStore.online_id||null,favourite_genres:this.userStore.favourite_genres||[]}}},methods:{async fetch_csrf_token(){try{const e=await fetch(`${this.apiBaseUrl}/csrf/`,{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.csrfToken=s.csrfToken,console.log(`Fetched csrf token: ${this.csrfToken}`)}else console.log(`Failed to fetch token, ${e.statusText}`)}catch(e){console.error(`Error fetching token, ${e}`)}},async fetch_all_user(e=1){try{const s=new URLSearchParams;s.append("sort",this.sortBy.toString()),s.append("page",e.toString()),null!==this.minAge&&s.append("minAge",this.minAge),null!==this.maxAge&&s.append("maxAge",this.maxAge);const o=await fetch(`${this.apiBaseUrl}/user-list/?${s.toString()}`,{method:"GET",credentials:"include"});if(o.ok){const e=await o.json();this.userList=e.user_list.map((e=>({...e,showMore:!1}))),this.currentPage=e.current_page,this.totalPages=e.total_pages,this.hasNext=e.has_next,this.hasPrevious=e.has_previous}else console.log(`Failed to fetch user list, ${o.statusText}`)}catch(s){console.error(`Error fetching user list, ${s}`)}},async sendFriendRequest(e){try{const s=await fetch(`${this.apiBaseUrl}/friend-request/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({friend_id:e}),credentials:"include"}),o=await s.json();this.fetch_friend_requests(),alert(o.message)}catch(s){console.error("Error sending request:",s)}},async fetch_friend_requests(){try{const e=await fetch(`${this.apiBaseUrl}/friend-request/`,{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.friendRequestList=s}else console.log(`Failed to fetch friend requests, ${e.statusText}`)}catch(e){console.error(`Error fetching friend requests, ${e}`)}},async acceptRequest(e){try{const s=await fetch(`${this.apiBaseUrl}/friend-request/`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({request_id:e,action:"accept"}),credentials:"include"});this.fetch_friend_requests(),this.fetch_all_user();const o=await s.json();alert(o.message)}catch(s){console.error("Error sending request:",s)}},async declineRequest(e){try{const s=await fetch(`${this.apiBaseUrl}/friend-request/`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({request_id:e,action:"decline"}),credentials:"include"});this.fetch_friend_requests(),this.fetch_all_user();const o=await s.json();alert(o.message)}catch(s){console.error("Error sending request:",s)}},viewMore(e){0==e.is_friend?alert("You needs to be friends to view more info"):e.showMore=!e.showMore},reset(){this.minAge=null,this.maxAge=null,this.sortBy="Most Common",this.fetch_all_user()},moreInfo(e){this.showMoreInfo=!0,this.moreInfoBook=e},backPage(){this.showMoreInfo=!1,this.moreInfoBook=null},closeViewMore(e){e.showMore=!1,this.showMoreInfo=!1,this.moreInfoBook=null},prevPage(){this.fetch_all_user(this.currentPage-1),window.scrollTo({top:0,behavior:"smooth"})},nextPage(){this.fetch_all_user(this.currentPage+1),window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.fetch_csrf_token(),this.fetch_all_user(),this.fetch_friend_requests()}};const zt=(0,h.A)(Yt,[["render",Ht]]);var Zt=zt;const ea=[{path:"/",name:"Main Page",component:Je},{path:"/dashboard",name:"Dashboard Page",component:No},{path:"/community",name:"Social Page",component:Zt}],sa=(0,g.aE)({history:(0,g.LA)(),routes:ea});var oa=sa;const ta=(0,t.Ef)(_),aa=(0,a.Ey)();ta.use(oa),ta.use(aa),ta.mount("#app")}},s={};function o(t){var a=s[t];if(void 0!==a)return a.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(s,t,a,n){if(!t){var r=1/0;for(d=0;d<e.length;d++){t=e[d][0],a=e[d][1],n=e[d][2];for(var i=!0,l=0;l<t.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](t[l])}))?t.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=a();void 0!==c&&(s=c)}}return s}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,a,n]}}(),function(){o.d=function(e,s){for(var t in s)o.o(s,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={524:0};o.O.j=function(s){return 0===e[s]};var s=function(s,t){var a,n,r=t[0],i=t[1],l=t[2],c=0;if(r.some((function(s){return 0!==e[s]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var d=l(o)}for(s&&s(t);c<r.length;c++)n=r[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(7243)}));t=o.O(t)})();
//# sourceMappingURL=app.js.map